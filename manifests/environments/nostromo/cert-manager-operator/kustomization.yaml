apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

commonAnnotations:
  app.kubernetes.io/name: cert-manager-operator

resources:
  - github.com/redhat-cop/gitops-catalog/cert-manager-operator/operator/base?ref=main
  - cluster-cert-manager.yaml
  - letsencrypt-cluster-issuer.yaml
  - google-clouddns-dns01-solver.yaml
  - cloudflare-b4mad-racing-dns01-solver.yaml

patchesStrategicMerge:
  - |-
    apiVersion: operator.openshift.io/v1alpha1
    kind: CertManager
    metadata:
      name: cluster
    spec:
      controllerConfig:
        overrideArgs:
          - "--acme-http01-solver-nameservers=8.8.8.8:53,1.1.1.1:53"
          - "--dns01-recursive-nameservers=8.8.8.8:53,1.1.1.1:53"
          - "--dns01-recursive-nameservers-only"
          - "--v=6"
      webhookConfig:
        overrideArgs:
          - "--v=6"
      cainjectorConfig:
        overrideArgs:
          - "--v=6"
